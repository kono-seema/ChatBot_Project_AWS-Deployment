option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: 8080
  
  aws:elasticbeanstalk:container:nodejs:
    NodeCommand: "node server.js"
    NodeVersion: 18.x
  
  aws:autoscaling:launchconfiguration:
    IamInstanceProfile: chatbot-ec2-role
    InstanceType: t3.small
    RootVolumeType: gp3
    RootVolumeSize: 20
  
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    LoadBalancerType: application
  
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 7
  
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced

commands:
  01_node_version:
    command: |
      echo "Node version: $(node --version)"
      echo "NPM version: $(npm --version)"